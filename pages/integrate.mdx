## **Integrate into you app**

Integrating your dashboard into your app is a straightforward three-step process.

### **1) Install Semaphor Package**

Open your terminal in your project directory and run the following command. This command installs the **`react-semaphor`** package and adds it to your project dependencies.

```markdown copy
npm i react-semaphor
```

### **2) Get Auth Token**

Before rendering the `Dashboard`, first acquire the `AuthToken`. This token enhances the security of your dashboard by restricting access to only users with the token. Make a simple fetch call as shown below.

```jsx copy {2-3}
const fetchAuthToken = async () => {
  const dashboard_id = 'your-dashboard-id'; // Replace with your actual dashboard ID
  const dashboard_secret = 'your-dashboard-secret'; // Replace with your actual dashboard secret

  const response = await fetch('<https://semaphor.cloud/v1/token>', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      dashboard_id,
      dashboard_secret,
    }),
  });

  if (!response.ok) {
    console.error('Failed to fetch auth token');
    return;
  }

  const token = await response.json();
  setAuthToken(token);
};
```

### **3) Initialize Dashboard**

Below is a simple example of a React component that demonstrates how to use the **`Dashboard`** component from the **`react-semaphor`** package.

```jsx {7-10} copy
import React from 'react';
import { Dashboard } from 'react-semaphor';

const AnalyticsDashboard = () => {
  return (
    <div>
      <Dashboard
        authToken={authToken}
        dashboardId="your-dashboard-id" // Replace with your actual dashboard ID
      />
    </div>
  );
};

export default AnalyticsDashboard;
```

### Full Code:

Here is the complete code that uses the above steps. You can copy and paste this simple example into your own application.

```jsx
import React, { useState, useEffect } from 'react';
import { Dashboard } from 'react-semaphor';

const AnalyticsDashboard = () => {
  const [authToken, setAuthToken] = useState('');

  useEffect(() => {
    const fetchAuthToken = async () => {
      const dashboardId = 'your-dashboard-id'; // Replace with your actual dashboard ID
      const dashboardSecret = 'your-dashboard-secret'; // Replace with your actual dashboard secret

      const response = await fetch('<https://semaphor.cloud/v1/token>', {
        // Replace with your actual auth service URL
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          dashboardId,
          dashboardSecret,
        }),
      });

      if (!response.ok) {
        // Handle response error
        console.error('Failed to fetch auth token');
        return;
      }

      const data = await response.json();
      setAuthToken(data.authToken); // Ensure the response contains authToken
    };

    fetchAuthToken();
  }, []);

  return (
    <div>
      <h2>My Cool Dashboard</h2>
      {authToken ? (
        <Dashboard
          dashboardId="your-dashboard-id" // Replace with your actual dashboard ID
          AuthToken={authToken} // Pass the fetched AuthToken here
        />
      ) : (
        <p>Loading...</p> // Display loading text or spinner while fetching AuthToken
      )}
    </div>
  );
};

export default AnalyticsDashboard;
```

### **Key Considerations:**

- **Security Note:** Keep the **`DashboardSecret`** secure and do not expose it in client-side code in production. This example is for demonstration purposes. In a real-world application, the authentication token should be fetched from a secure, server-side environment.
- **Fetching the AuthToken:** Before the dashboard can be displayed, an authentication token must be fetched. The **`useEffect`** hook is used to perform this action when the component mounts.
- **Conditional Rendering:** The **`Dashboard`** component is rendered only after the **`AuthToken`** has been fetched, displaying a loading message in the meantime. This ensures that the component attempts to render the dashboard only when all necessary data is available.
